<html>
	<head>
        <link rel="stylesheet" type="text/css" href="main.css">
        <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
		<!--<script src="https://d3js.org/d3.v3.min.js"></script>-->
        <script src="velocity/velocity.min.js"></script>
        <script src="velocity/velocity.ui.min.js"></script>
        <script src="gameComponents/loginClass.js"></script>
        <script src="gameComponents/spin.min.js"></script>
		<script>
            var _user = null;
            var _userAvatarSrc = "restricted/images/avatars/defaultAvatar.png";
            var blockPageLoading = false;
			$("document").ready(function (){
				//load default background
                loadBackground("gameComponents/maps/exampleMap.png");
                clearScreenToStartScreen();
                
                // lock scroll position, but retain settings for later
                var scrollPosition = [
                    self.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft,
                    self.pageYOffset || document.documentElement.scrollTop  || document.body.scrollTop
                ];
                var html = jQuery('html'); // it would make more sense to apply this to body, but IE7 won't have that
                html.data('scroll-position', scrollPosition);
                html.data('previous-overflow', html.css('overflow'));
                html.css('overflow', 'hidden');
                window.scrollTo(scrollPosition[0], scrollPosition[1]);
                

			});
            /**
             * Gets the cookie
             * @author Ignacy Debicki
             * @param   {string} cname Name of cookie
             * @returns {string} Cookie content
             */
            function getCookie(cname) {
                var name = cname + "=";
                var ca = document.cookie.split(';');
                for(var i=0; i<ca.length; i++) {
                    var c = ca[i];
                    while (c.charAt(0)==' ') c = c.substring(1);
                    if (c.indexOf(name) == 0) return c.substring(name.length,c.length);
                }
                return "";
            }
			/**
			 * Sets the background for the game
			 * @author Ignacy Debicki
			 * @param {string} image URL to image file
			 */
			function loadBackground(image) {
                $("#gameDiv").css("background-image","url(" + image + ")");
			}
            /**
             * Removes all content from game screen and resets the start screen
             * @author Ignacy Debicki
             */
            function clearScreenToStartScreen(){
                //clear screen
                $("#gameDiv").velocity("slideUp",500,function(){
                    showStartScreen()
                    $(this).slideDown(100);
                }); 
            }
            /**
             * Empties the game area and shows the startGameScreen
             * @author Ignacy Debicki
             */
            function showStartScreen(){
                var screen = $("#gameDiv");
                screen.empty();
                loadElement("gameComponents/startGameScreen.html","startGameScreen");
            }
            /**
             * Loads the resource into the document
             * @author Ignacy Debicki
             * @param {string}   element  URL to the element to load
             * @param {string}   id       Identifier for the div into which the resource will be loaded
             * @param {function} callback Function to be called once the element is loaded
             */
            function loadElement(element,id,callback){
                if (blockPageLoading == false){
                    blockPageLoading = true;
                    var screen = $("#gameDiv");
                    screen.append('<div id="' + id +'"></div>')
                    $.get(element, function(data) {
                        $("#" + id).append(data);
                        if (callback){
                            callback();
                        }
                    });
                    blockPageLoading = false;
                }
                
                // $("id").length - could add to queue for specific instances
            }
            /**
             * Removes the element from the document
             * @author Ignacy Debicki
             * @param {string} id Id of element to remove
             */
            function removeElement(id){
                $("#" + id).remove();
            }
            /**
             * Locks the buttons assosciated with the identifier
             * @author Ignacy Debicki
             * @param {string} id Identifier of buttons to lock. Can be a class identifier
             */
            function lockButtons(id){
                $(id).attr("disabled", "disabled");
            }
            /**
             * Unlocks the buttons assosciated with the identifier
             * @author Ignacy Debicki
             * @param {string} id Identifier of buttons to unlock. Can be a class identifier
             */
            function unlockButtons(id){
                $(id).removeAttr("disabled");
            }
            /**
             * Logs the connection error to the console
             * @author Ignacy Debicki
             * @param {object} jqXHR       jqXHR (jQuery XMLHttpRequest)
             * @param {string} textStatus  Status of the connection
             * @param {string} errorThrown HTTP error
             */
            function logError(jqXHR,textStatus,errorThrown){
                console.log(jqXHR);
                console.log(textStatus);
                console.log(errorThrown);
            }
            /**
             * Adds a loading screen to an element
             * @author Ignacy Debicki
             * @param {string} element CSS identifier of element
             */
            function loadingScreen(element){
                var overlay = $('<div class="loadingOverlay">');
                var loadingImage = new Spinner().spin();
                overlay.append(loadingImage.el);
                this.overlay=overlay;
                this.spinner = loadingImage;
                this.mainElement
                $(element).append(overlay);
            }
            
            loadingScreen.prototype={
                /**
                 * Removes the loading screen of an element
                 * @author Ignacy Debicki
                 */
                hideLoadingScreen: function(){
                    this.spinner.stop();
                    this.overlay.remove();
                }
            }

		</script>
	</head>
	<body>
		<!-- title bar with navigation
        <div id='headerMain'>
		  <h1>Title</h1>
		</div>
		<div id='navigationBar'>
			<nav>
				<ul>
					<li><a href="">Home</a></li>
					<li><a href="">Stuff</a></li>
					<li><a href="">More stuff</a></li>
					<li><a href="">Contact us</a></li>
					
				</ul>
				<div id="socialIcons">
					<img id="twitterImg" src=images/test.png height = 20px />
				</div>
			</nav>

		</div>
        -->
        <div id="coverDiv"></div>
        <div id="coverDiv2"></div>
        <div id="coverDiv3"></div>
        <div id="coverDiv4"></div>
        <div id='gameDiv'></div>
	</body>
</html>